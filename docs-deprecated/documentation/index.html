<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>@mode-7/zap Documentation & Examples</title>
  <base href="../">
  <link rel="icon" type="image/png" href="assets/favicon.png">
  <link rel="stylesheet" href="https://esm.sh/highlight.js@11.9.0/styles/tokyo-night-dark.min.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #0f0f23;
      color: #fff;
      overflow: hidden;
    }

    .container {
      display: flex;
      height: 100vh;
    }

    /* Sidebar */
    .sidebar {
      width: 280px;
      background: #1a1a2e;
      border-right: 1px solid #2a2a3e;
      display: flex;
      flex-direction: column;
      overflow-y: auto;
    }

    .sidebar-header {
      padding: 24px;
      border-bottom: 1px solid #2a2a3e;
    }

    .sidebar-header h1 {
      font-size: 20px;
      color: #4fc3f7;
      margin-bottom: 8px;
    }

    .sidebar-header p {
      font-size: 13px;
      color: #888;
    }

    .nav-items {
      padding: 12px 0;
    }

    .nav-section-title {
      padding: 20px 24px 8px 24px;
      font-size: 11px;
      font-weight: 600;
      color: #666;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .nav-section-title:not(:first-child) {
      margin-top: 8px;
      border-top: 1px solid #2a2a3e;
      padding-top: 20px;
    }

    .nav-item {
      padding: 12px 24px;
      cursor: pointer;
      transition: all 0.2s;
      border-left: 3px solid transparent;
      font-size: 14px;
      color: #ccc;
    }

    .nav-item:hover {
      background: #0f3460;
      color: #fff;
    }

    .nav-item.active {
      background: #0f3460;
      border-left-color: #4fc3f7;
      color: #fff;
    }

    .nav-item-icon {
      margin-right: 10px;
    }

    /* Main Content */
    .main-content {
      flex: 1;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .content-header {
      padding: 24px 32px;
      border-bottom: 1px solid #2a2a3e;
      background: #16213e;
    }

    .content-header h2 {
      font-size: 24px;
      margin-bottom: 8px;
    }

    .content-header p {
      color: #888;
      font-size: 14px;
    }

    .content-body {
      flex: 1;
      overflow-y: auto;
      padding: 32px;
    }

    .demo-section {
      display: none;
      animation: fadeIn 0.3s;
    }

    .demo-section.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .demo-container {
      background: #1a1a2e;
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 24px;
    }

    .demo-canvas-wrapper {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 400px;
      background: #0f0f23;
      border-radius: 8px;
      margin-bottom: 20px;
    }

    canvas {
      border-radius: 8px;
    }

    .code-section {
      background: transparent;
      border-radius: 0;
      padding: 0;
    }

    .code-section h3 {
      color: #4fc3f7;
      margin-bottom: 16px;
      font-size: 16px;
    }

    pre {
      background: transparent;
      padding: 0;
      margin: 24px 0;
      overflow-x: auto;
      font-size: 13px;
      line-height: 1.6;
    }

    pre code.hljs {
      display: block;
      padding: 20px 24px !important;
      background: #16213e !important;
      border-radius: 8px;
      overflow-x: auto;
    }

    .doc-content pre code.hljs {
      padding: 20px 24px !important;
    }

    /* Loading state */
    .loading {
      text-align: center;
      padding: 60px;
      color: #888;
    }

    /* Documentation content */
    .doc-content {
      max-width: 800px;
    }

    .doc-content h1 {
      color: #4fc3f7;
      font-size: 28px;
      margin-top: 40px;
      margin-bottom: 20px;
    }

    .doc-content h1:first-child {
      margin-top: 0;
    }

    .doc-content h2 {
      color: #4fc3f7;
      font-size: 24px;
      margin-top: 36px;
      margin-bottom: 18px;
    }

    .doc-content h2:first-child {
      margin-top: 0;
    }

    .doc-content h3 {
      color: #4fc3f7;
      font-size: 20px;
      margin-top: 32px;
      margin-bottom: 16px;
    }

    .doc-content h3:first-child {
      margin-top: 0;
    }

    .doc-content h4 {
      color: #4fc3f7;
      font-size: 16px;
      margin-top: 24px;
      margin-bottom: 12px;
    }

    .doc-content p {
      color: #ccc;
      line-height: 1.8;
      margin-bottom: 16px;
    }

    .doc-content ul, .doc-content ol {
      color: #ccc;
      line-height: 1.8;
      margin-bottom: 16px;
      padding-left: 24px;
    }

    .doc-content li {
      margin-bottom: 8px;
    }

    .doc-content code {
      background: #1a1a2e;
      padding: 2px 6px;
      border-radius: 3px;
      font-size: 13px;
      color: #4fc3f7;
    }

    .doc-content pre code {
      background: transparent;
      padding: 0;
    }

    .doc-content .info-box {
      background: #16213e;
      border-left: 3px solid #4fc3f7;
      padding: 16px 20px;
      margin: 24px 0;
      border-radius: 4px;
    }

    .doc-content .info-box p:last-child {
      margin-bottom: 0;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Sidebar Navigation -->
    <div class="sidebar">
      <div class="sidebar-header">
        <h1>@mode-7/zap</h1>
        <p>Documentation & Examples</p>
      </div>
      <div class="nav-items">
        <div class="nav-section-title">Getting Started</div>
        <div class="nav-item active" data-demo="installation">
          <span class="nav-item-icon">üì•</span> Installation
        </div>
        <div class="nav-item" data-demo="quickstart">
          <span class="nav-item-icon">‚ö°</span> Quick Start
        </div>

        <div class="nav-section-title">Core Concepts</div>
        <div class="nav-item" data-demo="architecture">
          <span class="nav-item-icon">üèóÔ∏è</span> Architecture
        </div>
        <div class="nav-item" data-demo="game">
          <span class="nav-item-icon">‚öôÔ∏è</span> Game Configuration
        </div>
        <div class="nav-item" data-demo="scenes">
          <span class="nav-item-icon">üé¨</span> Scenes
        </div>
        <div class="nav-item" data-demo="entities">
          <span class="nav-item-icon">üéØ</span> Entities
        </div>

        <div class="nav-section-title">Visual Elements</div>
        <div class="nav-item" data-demo="sprite">
          <span class="nav-item-icon">üé®</span> Sprites & Shapes
        </div>
        <div class="nav-item" data-demo="images">
          <span class="nav-item-icon">üñºÔ∏è</span> Image Sprites
        </div>
        <div class="nav-item" data-demo="animatedsprite">
          <span class="nav-item-icon">üé¨</span> Animated Sprites
        </div>
        <div class="nav-item" data-demo="text">
          <span class="nav-item-icon">‚úèÔ∏è</span> Text Rendering
        </div>
        <div class="nav-item" data-demo="fonts">
          <span class="nav-item-icon">üî§</span> Google Fonts
        </div>

        <div class="nav-section-title">UI Components</div>
        <div class="nav-item" data-demo="button">
          <span class="nav-item-icon">üîò</span> Button
        </div>
        <div class="nav-item" data-demo="ninepatch">
          <span class="nav-item-icon">üìê</span> Nine-Patch
        </div>

        <div class="nav-section-title">Camera</div>
        <div class="nav-item" data-demo="camera">
          <span class="nav-item-icon">üìπ</span> Camera Control
        </div>

        <div class="nav-section-title">Audio</div>
        <div class="nav-item" data-demo="audio">
          <span class="nav-item-icon">üîä</span> Sound & Music
        </div>

        <div class="nav-section-title">Interactions</div>
        <div class="nav-item" data-demo="tap">
          <span class="nav-item-icon">üëÜ</span> Tap Gesture
        </div>
        <div class="nav-item" data-demo="swipe">
          <span class="nav-item-icon">üëà</span> Swipe Gesture
        </div>
        <div class="nav-item" data-demo="drag">
          <span class="nav-item-icon">‚úã</span> Drag Gesture
        </div>
        <div class="nav-item" data-demo="touchtrail">
          <span class="nav-item-icon">‚ú®</span> Touch Trail
        </div>
        <div class="nav-item" data-demo="canvasevents">
          <span class="nav-item-icon">üñ±Ô∏è</span> Canvas Events
        </div>
        <div class="nav-item" data-demo="canvasgestures">
          <span class="nav-item-icon">üëã</span> Canvas Gestures
        </div>

        <div class="nav-section-title">Animation & Effects</div>
        <div class="nav-item" data-demo="animations">
          <span class="nav-item-icon">‚ú®</span> Animations
        </div>
        <div class="nav-item" data-demo="easing">
          <span class="nav-item-icon">üìà</span> Easing Functions
        </div>
        <div class="nav-item" data-demo="particles">
          <span class="nav-item-icon">üéÜ</span> Particles
        </div>

        <div class="nav-section-title">Utilities</div>
        <div class="nav-item" data-demo="collision">
          <span class="nav-item-icon">üí•</span> Collision Detection
        </div>
        <div class="nav-item" data-demo="layout">
          <span class="nav-item-icon">üìê</span> Layout Helpers
        </div>
        <div class="nav-item" data-demo="assetloader">
          <span class="nav-item-icon">üì¶</span> Asset Loader
        </div>
        <div class="nav-item" data-demo="storage">
          <span class="nav-item-icon">üíæ</span> Storage
        </div>
        <div class="nav-item" data-demo="timer">
          <span class="nav-item-icon">‚è±Ô∏è</span> Timers
        </div>
      </div>
    </div>

    <!-- Main Content Area -->
    <div class="main-content">
      <div class="content-header">
        <h2 id="demo-title">Installation</h2>
        <p id="demo-description">Get started with @mode-7/zap</p>
      </div>
      <div class="content-body">
        <div id="demo-content">
          <!-- Demo content will be loaded here -->
          <div class="loading">Select a topic from the sidebar</div>
        </div>
      </div>
    </div>
  </div>

  <script type="module">
    import { loadMarkdownDoc } from './markdown-renderer.js';

    async function loadDemo(demoKey) {
      const content = document.getElementById('demo-content');

      // Show loading state
      content.innerHTML = '<div class="loading">Loading...</div>';

      try {
        // Load markdown documentation
        const result = await loadMarkdownDoc(demoKey, content);

        // Update header with frontmatter data
        if (result.frontmatter) {
          document.getElementById('demo-title').textContent = result.frontmatter.title || demoKey;
          document.getElementById('demo-description').textContent = result.frontmatter.description || '';
        }
      } catch (error) {
        console.error(`Failed to load documentation: ${demoKey}`, error);
        content.innerHTML = `
          <div class="loading" style="color: #e94560;">
            Failed to load documentation for "${demoKey}"
          </div>
        `;
      }
    }

    // Navigation
    document.querySelectorAll('.nav-item').forEach(item => {
      item.addEventListener('click', () => {
        document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
        item.classList.add('active');
        loadDemo(item.dataset.demo);
      });
    });

    // Load installation page by default
    loadDemo('installation');
  </script>
</body>
</html>
